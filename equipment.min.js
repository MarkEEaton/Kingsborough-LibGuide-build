!function(g){g.fn.LibCalEquipmentBooking=function(t){var o,i=g('script[src$="equipment.min.js"]').attr("src"),e=document.createElement("a"),d=(e.href=i,(t=g.extend({animationEffect:"fadeIn",animationSpeed:400,moveModalSpeed:"slow",background:"000",opacity:.5,openOnLoad:!1,docClose:!1,closeByEscape:!0,moveOnScroll:!1,resizeWindow:!1,gid:0,eid:0,iid:0,height:450,width:400,domain:"https://"+e.hostname,redirectMobile:!1,redirectViewport:330},t)).triggerid=g(this).attr("id"),t.trigger="#"+t.triggerid,t.olay=t.trigger+"-s-lc-eqw-overlay",t.modals=t.trigger+"-s-lc-eqw-modal",t.close=t.trigger+"-s-lc-eqw-close",g("body").append('<div id="'+t.triggerid+'-s-lc-eqw-overlay"></div>'),g(t.olay).css({width:"100%",height:"100%",position:"fixed",top:"0",left:"0","z-index":"1000",display:"none"}),g("body").append('<div id="'+t.triggerid+'-s-lc-eqw-modal" style="box-sizing: content-box!important; display: none"><div style="background-image: url(https://lcimages.s3.amazonaws.com/loading.gif) 50% 50% no-repeat; width: 100%;height: 100%;"><a href="#" id="'+t.triggerid+'-s-lc-eqw-close" aria-label="close"></a></div>'),g(t.olay).css({width:"100%",height:"100%",position:"fixed",top:"0",left:"0","z-index":"1000",display:"none"}),g(t.olay)),n=g(t.modals),r=!1,a=!1;function l(){n.hide();var i=g(window).height()/2-o.outerHeight()/2+g(window).scrollTop(),e=g(window).width()/2-o.outerWidth()/2+g(window).scrollLeft();o.css({top:i=i<0?5:i,left:e=e<0?5:e}),!1===r?!1===t.redirectMobile&&(d.css({opacity:t.opacity,backgroundColor:"#"+t.background}),d[t.animationEffect](t.animationSpeed),o.delay(t.animationSpeed)[t.animationEffect](t.animationSpeed)):o.show(),r=!0}function c(){n.stop(!0).animate({top:g(window).height()/2-n.outerHeight()/2+g(window).scrollTop(),left:g(window).width()/2-n.outerWidth()/2+g(window).scrollLeft()},t.moveModalSpeed)}function s(){return a=r=!1,g("#"+t.triggerid+"-iframe").remove(),n.fadeOut(100,function(){"slideDown"===t.animationEffect?d.slideUp():"fadeIn"===t.animationEffect&&d.fadeOut()}),g(t.trigger).trigger("focus"),!1}return"fadein"===t.animationEffect&&(t.animationEffect="fadeIn"),"slidedown"===t.animationEffect&&(t.animationEffect="slideDown"),d.css({opacity:0}),t.openOnLoad?l():(d.hide(),n.hide()),g(t.trigger).bind("click",function(i){i.preventDefault(),!1===a&&function(){a=!0;var i=g(window).width(),e=g(window).height(),o=t.domain+"/widget/equipment?&gid="+t.gid+"&eid="+t.eid+"&iid="+t.iid;if(t.redirectMobile&&i<=t.redirectViewport)return window.location.href=o;t.width>i&&(t.width=i-30,t.width<0||t.width<250)&&(t.width=t.redirectViewport);t.height>e&&(t.height=e-60,t.height<0||t.height<250)&&(t.height=250);g(t.close).after('<iframe id="'+t.triggerid+'-iframe" title="Space booking widget" onload="this.contentWindow.focus()" src="'+o+'" height="'+t.height+'" width="'+t.width+'" style="padding:0; margin:0; border:0; overflow-x: hidden; overflow-y: scroll;"><a href="'+o+'">Go to booking widget.</a></iframe>'),g(t.close).css({background:"url(//lcimages.s3.amazonaws.com/ms-x.png) no-repeat",width:"25px",height:"29px","z-index":"1002",display:"inline",position:"absolute",top:"0px",right:"0px",cursor:"pointer",margin:"0",padding:"0"});i=t.width+6,e=t.height+10;g(t.modals).css({background:"#fff",padding:"30px 0px 0px 10px",margin:"0px",border:"2px solid #ddd","border-radius":"4px",overflow:"auto","z-index":"1001",position:"absolute",width:i+"px",height:e+"px","-webkit-overflow-scrolling":"touch"})}(),o=g(t.modals),l()}),g(t.close).bind("click",s),t.docClose&&d.bind("click",s),t.closeByEscape&&g(window).bind("keyup",function(i){if(27===i.which){i=g("#"+t.triggerid+"-iframe");if(0!==i.length)return s()}}),!!t.resizeWindow&&(g(window).bind("resize",c),!!t.moveOnScroll)&&void g(window).bind("scroll",c)}}(jQuery);
